<!DOCTYPE html>
<html>
<title>Top 15 Olympic Participant Visualization</title>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Raleway">
<script src='https://d3js.org/d3.v5.min.js'></script>
<script src='https://d3js.org/d3.v5.js'></script>
<style>
    body,h1,h2,h3,h4,h5 {font-family: "Raleway", sans-serif}
    .country {
     fill: #ccc;
     stroke: #fe6;
     stroke-width: .5px;
     stroke-linejoin: round;
    }

    div.tooltip {
      color: #222;
      background: #fff;
      padding: .5em;
      text-shadow: #f5f5f5 0 1px 0;
      border-radius: 2px;
      box-shadow: 0px 0px 2px 0px #a6a6a6;
      opacity: 0.9;
      position: absolute;
    }
</style>
<body class="w3-light-grey" onload="init()">

<div class="w3-content" style="max-width:1400px">

<header class="w3-container w3-center w3-padding-32">
 <h1 style="font-size:60px"><b>Participation by Top 15 Olympic players(countries)</b></h1>
 <p style="font-size:35px">Further Drill Down on Top 15 Olympic participating countries</p>

 <!-- Header -->
<header id="portfolio">
  <a href="#"></a>
  <span class="w3-button w3-hide-large w3-xxlarge w3-hover-text-grey" onclick="w3_open()"><i class="fa fa-bars"></i></span>
  <div class="w3-container">
  <h2><b>Olympic Drill Tower</b></h2>
  <div class="w3-section w3-bottombar w3-padding-16">
    <span class="w3-margin-right">Look For:</span>
    <a href="https://trupthi-developer.github.io/NarrativeVisualization/" class="w3-button w3-white">Overview</a>
    <button class="w3-button w3-black"><i class="participationByTop15 w3-margin-center"></i>Top Participation by Country</button>
    <a href="https://trupthi-developer.github.io/NarrativeVisualization/medalBasedDistributionByCountry.html" class="w3-button w3-white"></i>Medals by Country</a>
  </div>
  </div>
</header>

</header>
<!-- Grid -->
<div class="w3-row">
  <div class="w3-col l150 s85">
    <!-- Page Event Based Charts entry -->
    <div class="w3-card-4 w3-margin w3-white">
      <div class="w3-container">
        <h3><b>Top 15 Olympic Participants</b></h3>
        <h5>Participation over, <span class="w3-opacity">100 years</span></h5>
      </div>

      <div class="w3-container">
        <div class="w3-row">
          <div class="w3-row m8 s12">
              <p>As we have already seen and identified the top 15 countries by participation, the visualization below gives the viewer an understanding how these top 15 countries have participated over time and the events they participated in.
                 Its interesting to know which country has got equal/even representations in these two event types, i.e., Summer and Winter. Note, there is also an event equestrian, but that event type has been excluded in the the following visualizations
              </p>
              <p>
                 Just to give a clear visual representation of the two events in the below chart, I have picked the representing year <span style="text-shadow:1px 1px 0 #444"> 1924 </span> as default, the year when both these events first occurred. By choosing years between <span class="w3-medium" style="text-shadow:1px 1px 0 #444"> 1924 - 1992 </span>, we can see both the visualizations for the two event kinds in consideration.
                 The other years have a either or representations of the event. Mouseover on the bars to see their participation counts.
              </p>
              <p> Its not always true that countries dominating in participation, may not dominate in Winter events. Due to the kind of sports organized, their geological location, their expertise in sport in either kinds of events, country's qualified participation varies.
                 For example, in the year <span class="w3-medium" style="text-shadow:1px 1px 0 #444"> 1988 </span>, even though United States had an upper hand in Summer event, Germany took over in the Winter events
              </p>
              <!-- Initialize a select button -->
              <select id="selectYear" class="w3-col l5 s22" ></select>
              <div id="EventOlympicParticipation" class="w3-col l16 s12">
              </div>
          </div>
        </div>
      </div>
    </div>

    <hr>

    <!-- Heat Map on Sport entry -->
    <div class="w3-card-4 w3-margin w3-white">

      <div class="w3-container">
        <h3><b>Countries domination by Sports</b></h3>
        <h5>Heat Map to show the sports these countries dominated by participating in them, in Winter and Summer Olympics, <span class="w3-opacity">As of 2016</span></h5>
        <p> The visualization below, allows you to choose the event type and get an insight on the kinds of events these countries participated. Mouse over the cells in the map to get the number of participations by country.
        </p>
        <p>Based on cumulative participations, from the race chart we identified these top 15 countries to further drill down their best or most played sport. In order to understand where their participation concentrates, the below heat map shows darker hue colors for higher participation and vice versa
          From this, the most popular sport in <span class="w3-medium" style="text-shadow:1px 1px 0 #444"> Summer </span>, seems to be <span class="w3-medium" style="text-shadow:1px 1px 0 #444"> Athletics, Swimming, and Rowing </span>
          and in <span class="w3-medium" style="text-shadow:1px 1px 0 #444"> Winter </span> it seems to be <span class="w3-medium" style="text-shadow:1px 1px 0 #444"> Ice Hockey, Speed Skating and Alpine Skiing </span>
        </p>

      </div>

      <div class="w3-container">
        <div class="w3-row m8 s12">
              <!-- Initialize a select button -->
            <select id="selectEventType" class="w3-col l5 s22"></select>
            <div id="SportOlympicParticipation" class="w3-col l15 s22">
            </div>
        </div>
      </div>
    </div>


    <!-- Gender Based Distribution entry -->
    <div class="w3-card-4 w3-margin w3-white">

      <div class="w3-container">
        <h3><b>Participation by Gender</b></h3>
        <h5>Below stacked line area chart show the gender participation by the countries over the years in Olympics, <span class="w3-opacity">As of 2016</span></h5>
        <p> Now that we have seen the event types and sports, it will be interesting to know the participation by gender in each of the sports.
            The most popular sport being <span class="w3-medium" style="text-shadow:1px 1px 0 #444"> Athletics </span>, I have defaulted it to that representation.
        </p>
        <p>As you can see below, as the year passes by, the countries's female participation is improving. This can be seen in almost all of the sports listed in the drop down.
          Choose the favourite sport to dive deeper.
          From this chart we can derive an unique insight on understanding the fact that, countries have made significant effort in bringing in female participants for these sports and their participation trend is similar to male participations.
          We can see the gap in time (for the sport Athletics) when the female participation started, yet the trend between the two genders has been very promising.
        </p>
      </div>

      <div class="w3-container">
        <div class="w3-col m8 s12">
                  <!-- Initialize a select button -->
                  <select id="selectSport"></select>
                  <div id="GenderBasedSportParticipation" class="w3-col m15 s12">
          </div>
        </div>
        <div class="w3-container">
          <div class="w3-row m8 s12">

              </div>
          </div>
        </div>
      </div>
    </div>
  <!-- END PAGE ENTRIES -->
  </div>


  <script type="text/javascript">
  var dataTime = [1900,1904,1906,1912,1920,1924,1928,1932,1936,1948,1952,1956,1960,1964,1968,1972,1976,1980,1984,1984,1988,1992,1994,1996,1998,2000,2002,2004,2006,2008,2010,2012,2014,2016];

  // A function that update the color circle
  var changeEvent = function(){
      var eventType = d3.select(this).property('value');
      console.log(d3.select(this).property('value'));
      SportOlympicParticipationHeatMap.plotHeatMapSportByEvent(eventType);
    }

  //Code for Event based distribution
  async function EventOlympicParticipation () {

   var format = d3.format(",");
   // var margin = {top: 50, right: 40, bottom: 50, left: 80},
   //            width = 750 - margin.left - margin.right,
   //            height = 450 - margin.top - margin.bottom;

    const top15EventBasedParticipation = await d3.csv("https://raw.githubusercontent.com/Trupthi-developer/NarrativeVisualization/master/Top15ParticipationByEvents.csv")

      var groupByKey = "Country";
      var eventKeys = ['Summer', 'Winter'];
      //Build Color scale for chart
      var color =  d3.scaleOrdinal()
                          .domain(eventKeys)
                          .range(["#edc949","#af7aa1"]);

       //Build and update bars
       function plotEventByYear(yearValue) {

         var margin = {top: 50, right: 40, bottom: 50, left: 80},
                       width = 750 - margin.left - margin.right,
                       height = 450 - margin.top - margin.bottom;

         var tooltip = d3.select("#sideBySideComparedEvent").append("div")
                         .attr("class", "tooltip")
                         .style("display","none");

         var svg = d3.selectAll("#EventOlympicParticipation")
                     .append("svg")
                     .attr('class', 'sideBySideComparedEvent')
                     .attr("width", width + margin.left + margin.right)
                     .attr("height", height + margin.top + margin.bottom)
                     .append("g")
                     .attr("class","plotSideBySideBar")
                     .attr("transform", "translate("+margin.left+","+ margin.bottom+")");


           var legend = svg => {
                                 const g = svg.attr("transform", `translate(${width-margin.left},0)`)
                                     .attr("text-anchor", "end")
                                     .attr("font-family", "sans-serif")
                                     .attr("font-size", 10)
                                   .selectAll("g")
                                   .attr("class","colorLegend")
                                   .data(color.domain().slice().reverse())
                                   .join("g")
                                     .attr("transform", (d, i) => `translate(0,${i * 20})`);

                                 g.append("rect")
                                     .attr("x", -19)
                                     .attr("width", 19)
                                     .attr("height", 19)
                                     .attr("fill", color);

                                 g.append("text")
                                     .attr("x", 45)
                                     .attr("y", 9.5)
                                     .attr("dy", "0.35em")
                                     .text(d => d);
                               }


              var byYearDataSet= top15EventBasedParticipation.filter(function(d){ return d.Year == yearValue })

              var maxDomainSummer = d3.max(byYearDataSet, d=>+d.Summer)
              var maxDomainWinter = d3.max(byYearDataSet, d=>+d.Winter)



              var xScaleCountry = d3.scaleBand()
                                    .rangeRound([0, width - margin.right])
                                    .paddingInner(0.1)

              var xScaleEvent = d3.scaleBand()
                                .domain(eventKeys)
                                .padding(0.05)

              var yScaleParticipants = d3.scaleLinear()
                                       .rangeRound([height - margin.right, margin.top])

               xScaleCountry.domain(byYearDataSet.map(d => d[groupByKey]))
               xScaleEvent.rangeRound([0, xScaleCountry.bandwidth()])
               yScaleParticipants.domain([0, d3.max(byYearDataSet, function(d){ return (maxDomainSummer != 0)? +d.Summer : +d.Winter})]).nice()

              var xAxis = d3.axisBottom(xScaleCountry).tickSizeOuter(0);
              var yAxis = d3.axisLeft(yScaleParticipants).tickFormat(d3.format(".2s"));


             var mouseover = function(d) {
                  tooltip
                    .attr("style", "left:"+(event.pageX)+"px;top:"+event.pageY+"px")
                    .style("cursor","pointer")
                    .style("display","block")
                    .html("<strong>Number of Participations: </strong><span class='details'>" + d.value + "<br></span>" )

                }
             var mousemove = function(d) {
                  tooltip.style("opacity", 1)
                }
             var mouseleave = function(d) {
              tooltip.style("opacity", 0)
                    .style("display","none")
                }


              //Plot GroupChart
              svg.selectAll("g")
                  .attr("class","allBars")
                  .data(byYearDataSet)
                  .join("g")
                    .attr("transform", d => `translate(${xScaleCountry(d[groupByKey])},0)`)
                    .attr("class","barChart")
                  .selectAll("rect")
                  .data(d => eventKeys.map(key => ({key, value: d[key]})))
                  .join("rect")
                    .transition().duration(250)
                    .attr("x", d => xScaleEvent(d.key))
                    .attr("y", d => yScaleParticipants(d.value))
                    .attr("width", xScaleEvent.bandwidth())
                    .attr("height", d => yScaleParticipants(0) - yScaleParticipants(d.value))
                    .attr("fill", d => color(d.key))


                // Add the X Axis
                svg.append("g")
                    .attr("class", "x-axis")
                    .attr("transform", `translate(0,${height-margin.bottom+10})`)
                    .call(xAxis)
                    .selectAll("text")
                    .attr("transform","translate(-10,10)rotate(-45)");


                //Add label for x-axis
                // text label for the x axis
                svg.append("text")
                    .attr("class", "x-axisLabel")
                    .attr("transform",
                          "translate(" + (width - 350) + " ," +
                                         (height +10 ) + ")")
                    .style("text-anchor", "middle")
                    .text("Country");

                // Add the Y Axis
                svg.append("g")
                    .attr("class", "y-axis")
                    .call(yAxis);

                // text label for the y axis
                svg.append("text")
                    .attr("class", "y-axisLabel")
                    .attr("transform", "rotate(-90)")
                    .attr("y", 0 - margin.left)
                    .attr("x",0 - (height/2))
                    .attr("dy", "1em")
                    .style("text-anchor", "middle")
                    .text("Number of Participants");

                svg.append("g")
                    .attr("class","legend")
                    .call(legend);


          }// End of race chart

    // Handler for dropdown value change
     var dropdownChange = function() {
        var newYear = d3.select(this).property('value');
        d3.selectAll("#EventOlympicParticipation>*").remove();
        plotEventByYear(newYear);
      };

      var yearDropDown = d3.select("#selectYear")
                            .selectAll("myoptions")
                           	.data(dataTime)
                            .enter()
                          	.append('option')
                            .attr("pointer-events", "none")
                            .text(function (d) { return d; }) // text showed in the menu
                            .attr("value", function (d) { return d; }) // corresponding value returned by the button

      var yearValue = d3.select("#selectYear")
                        .on("change",dropdownChange );

      plotEventByYear("1924");
  }


     // Second Chart -
     var xSportAxis =["Art Contests","Athletics","Badminton","Baseball","Basketball","Boxing","Canoeing","Cycling","Diving","Fencing","Football","Gymnastics","Handball","Hockey","Judo","Rowing","Sailing","Shooting","Swimming","Tennis","Volleyball","Water Polo","Weightlifting","Wrestling","Alpine Skiing","Biathlon","Bobsleigh","Cross Country Skiing","Figure Skating","Freestyle Skiing","Ice Hockey","Luge","Ski Jumping","Speed Skating"];

    // Heat Map for the most popular SportOlympicParticipation
    async function SportOlympicParticipationHeatMap(){

      var url = "https://raw.githubusercontent.com/Trupthi-developer/NarrativeVisualization/master/MostPopularSportAnalysisDatasetHeatMap.csv"
      const SportTypeTop15Distribution = await d3.csv(url);
      var groupByKey = "Country";
      var eventKeys = "SportType";

      // Build color scale
      var myColorSummer = d3.scaleLinear()
                    .range(["white", "#edc949"])
                    .domain([1,250])

      var myColorWinter = d3.scaleLinear()
                    .range(["white", "#af7aa1"])
                    .domain([1,250])

      //Build and heatMap
      var plotHeatMapSportByEvent = function(EventValue) {

            // set the dimensions and margins of the graph
            var margin = {top: 50, right: 40, bottom: 60, left: 80},
              width = 850 - margin.left - margin.right,
              height = 650 - margin.top - margin.bottom;


            // append the svg object to the body of the page
            var svg = d3.selectAll("#SportOlympicParticipation")
                    .append("svg")
                    .attr("id","heatMapCanvas")
                    .attr("width", width + margin.left + margin.right)
                    .attr("height", height + margin.top + margin.bottom)
                    .append("g")
                    .attr("class","heatMapSpace")
                    .attr("transform", `translate(${margin.left},${margin.bottom-40})`);

            // create a tooltip
            var tooltip = d3.select("#SportOlympicParticipation")
              .append("div")
              .attr("class","tooltip")
                  // Get content for the heatMap
             var byEventDataSet= SportTypeTop15Distribution.filter(function(d){ return d.Event == EventValue })
             //svg.select("#plotSideBySideBar").remove();
             //svg.select("#allHeatMap").remove();
             //svg.select("#secondx-axis").remove();
             //svg.select("#secondy-axis").remove();

             var xScaleSport = d3.scaleBand()
                                   .domain(byEventDataSet.map(d => d[eventKeys]))
                                   .rangeRound([0, width])
                                   .paddingInner(0.11)


             var yScaleCountry = d3.scaleBand()
                                         .domain(byEventDataSet.map(d => d[groupByKey]))
                                         .rangeRound([height, margin.top])
                                         .paddingInner(0.11)

             var mouseover = function(d) {
                  tooltip
                    .attr("style", "left:"+(event.pageX)+"px;top:"+event.pageY+"px")
                    .style("cursor","pointer")
                    .style("display","block")
                    .html("<strong>Number of Participations: </strong><span class='details'>" + d.NumberOfParticipations + "<br></span>" )

                }
             var mousemove = function(d) {
                  tooltip.style("opacity", 1)
                }
             var mouseleave = function(d) {
              tooltip.style("opacity", 0)
                    .style("display","none")
                }

             var xAxis = d3.axisBottom(xScaleSport);
             var yAxis = d3.axisLeft(yScaleCountry);


             // add the squares
             svg.selectAll()
               .data(byEventDataSet, function(d) {return d.SportType+':'+d.Country;})
               .enter()
               .append("rect")
                 .attr("x", function(d) { return xScaleSport(d.SportType) })
                 .attr("y", function(d) { return yScaleCountry(d.Country) })
                 .attr("width", xScaleSport.bandwidth() )
                 .attr("height", yScaleCountry.bandwidth() )
                 .style("fill", function(d) { return (EventValue == "Summer") ? myColorSummer(d.NumberOfParticipations) : myColorWinter(d.NumberOfParticipations)} )
               .on("mouseover", mouseover)
               .on("mousemove", mousemove)
               .on("mouseleave", mouseleave)


               // Add the X Axis
               svg.append("g")
                   .attr("class", "secondx-axis")
                   .attr("transform", `translate(0,${height+1})`)
                   .call(xAxis)
                   .selectAll("text")
                   .attr("transform","translate(-10,10)rotate(-25)");


               // text label for the x axis
               svg.append("text")
                   .attr("class", "secondx-axisLabel")
                   .attr("transform",
                         "translate(" + (margin.left + margin.top+200) + " ," +
                                        (height +  margin.bottom ) + ")")
                   .style("text-anchor", "middle")
                   .text("Sport Types");

               // Add the Y Axis
               svg.append("g")
                   .attr("class", "secondy-axis")
                   .call(yAxis);

               // text label for the y axis
               svg.append("text")
                   .attr("class", "secondy-axisLabel")
                   .attr("transform", "rotate(-90)")
                   .attr("y", 0 - margin.left)
                   .attr("x",0 - (height/2))
                   .attr("dy", "1em")
                   .style("text-anchor", "middle")
                   .text("Country");


          }

      var initialMap = plotHeatMapSportByEvent("Summer");

      // Handler for dropdown value change
       var dropdownChange = function() {
          var eventVal = d3.select(this).property('value');
          d3.selectAll("#SportOlympicParticipation>*").remove();
          plotHeatMapSportByEvent(eventVal);
        };

        var EventDropDown = d3.select("#selectEventType")
                              .selectAll("myoptions")
                              .data(["Summer","Winter"])
                              .enter()
                              .append('option')
                              .attr("pointer-events", "none")
                              .text(function (d) { return d; }) // text showed in the menu
                              .attr("value", function (d) { return d; }) // corresponding value returned by the button

        var eventValue = d3.select("#selectEventType")
                          .on("change",dropdownChange );

    }

    //Code for stacked area chart
    async function genderBasedSportParticipationStackedArea () {

     var format = d3.format(",");

      var margin = {top: 50, right: 40, bottom: 50, left: 80},
                    width = 650 - margin.left - margin.right,
                    height = 450 - margin.top - margin.bottom;
      var tooltip = d3.select("#sideBySideComparedEvent").append("div")
                      .attr("class", "tooltip")
                      .style("display","none");

      var svg = d3.selectAll("#GenderBasedSportParticipation")
                                  .append("svg")
                                  .attr('class', 'stackedAreaGenderBasedParticipation')
                                  .attr("width", width + margin.left + margin.right)
                                  .attr("height", height + margin.top + margin.bottom)
                                  .append("g")
                                  .attr("class","stackedAreaChartSpace")
                                  .attr("transform", "translate("+margin.left+","+ margin.top+")");


      const genderBasedSportParticipation = await d3.csv("https://raw.githubusercontent.com/Trupthi-developer/NarrativeVisualization/master/MaleFemaleDistributionByEventSportType.csv")

      var legend = svg => {
                              const g = svg.attr("class","legendClass")
                                  .attr("transform", `translate(${width-10},0)`)
                                  .attr("text-anchor", "end")
                                  .attr("font-family", "sans-serif")
                                  .attr("font-size", 10)
                                .selectAll("g")
                                .attr("class","colorLegend")
                                .data(color.domain().slice().reverse())
                                .join("g")
                                  .attr("transform", (d, i) => `translate(0,${i * 20})`);

                              g.append("rect")
                                  .attr("x", -19)
                                  .attr("width", 19)
                                  .attr("height", 19)
                                  .attr("fill", color);

                              g.append("text")
                                  .attr("x", 45)
                                  .attr("y", 9.5)
                                  .attr("dy", "0.35em")
                                  .text(d => d);
                            }

          // Stack the data: each group will be represented on top of each other
          var mygroups = ["Female", "Male"] // list of group names
          //Build Color scale for chart
          var color =  d3.scaleOrdinal()
                              .domain(mygroups)
                              .range(["#ffb3ff","#668cff"]);

          // Features of the annotation
          const annotations = [
            {
              note: {
                label: "FirstFemaleParticipation",
                title: "Female Participations"
              },
              x: 100,
              y: 100,
              dy: 100,
              dx: 100
            }
          ]

          function plotStackedAreaChartByYear(sportValue) {
                 var byYearDataSet= genderBasedSportParticipation.filter(function(d){ return d.Sport == sportValue })
                  //var byYearDataSet= genderBasedSportParticipation;

                  d3.selectAll("path").remove();
                  svg.selectAll("#allAreaChart").remove();
                  svg.selectAll("#xStacked-axis").remove();
                  svg.selectAll("#yStacked-axis").remove();
                  svg.selectAll("#xStacked-axisLabel").remove();
                  svg.selectAll("#yStacked-axisLabel").remove();



                  var maxFemaleDomain = d3.max(byYearDataSet, d=>+d.Female)
                  var maxMaleDomain = d3.max(byYearDataSet, d=>+d.Male)

                  // group the data: one array for each value of the X axis.
                  var groupBySport = d3.nest()
                    .key(function(d) { return d.Year;})
                    .entries(byYearDataSet);
                  formatNumber = d3.format(",d")


                  var stackedData = d3.stack()
                                      .keys(mygroups)

                  var stackedSeries = stackedData(byYearDataSet);

                  // Add X axis --> it is a date format
                  var xSportYear = d3.scaleLinear()
                            .domain(["1900","2016"])
                            .range([ 0, width -margin.right]);

                  //.attr("transform", "translate(0," + height + ")")
                  //.call(d3.axisBottom(xSport).ticks(5));
                  // Add Y axis
                  domain = (maxMaleDomain > maxFemaleDomain) ? maxMaleDomain : maxFemaleDomain;

                  var yParticipation = d3.scaleLinear()
                            .domain([0, 750])
                            .range([height,0]);

                  //svg.append("g")
                  //.call(d3.axisLeft(yParticipation));

                  var xAxis = d3.axisBottom(xSportYear).ticks(25);
                  var yAxis = d3.axisLeft(yParticipation).tickFormat(d3.format("d"));

                  //Plot GroupChart
                  svg.append("g")
                        .attr("class","allAreaChart")
                        .selectAll("myLayers")
                        .data(stackedSeries)
                        .enter()
                        .append("path")
                        .attr("class", function(d) { return "myArea " + d.key })
                        .style("fill", function(d) { console.log(d.key) ;  return color(d.key); })
                        .attr("d", d3.area()
                              .x(function(d, i) { return xSportYear(d.data.Year);})
                              .y0(function(d) { return yParticipation(d[0]); })
                              .y1(function(d) { return yParticipation(d[1]); })
                            )


                  // Add the X Axis
                  svg.append("g")
                      .attr("class", "xStacked-axis")
                      .attr("transform", `translate(0,${height})`)
                      .transition().duration(500)
                      .call(xAxis)
                      .selectAll("text")
                      .attr("transform","translate(-10,10)rotate(-45)");

                  // Add the Y Axis
                  svg.append("g")
                      .attr("class", "yStacked-axis")
                      .transition().duration(500)
                      .call(yAxis);


                    //Add label for x-axis
                    // text label for the x axis
                    svg.append("text")
                        .attr("class", "xStacked-axisLabel")
                        .attr("transform",
                              "translate(" + (width - margin.left - 200) + " ," +
                                             (height + margin.top) + ")")
                        .style("text-anchor", "middle")
                        .text("Year");


                    // text label for the y axis
                    svg.append("text")
                        .attr("class", "yStacked-axisLabel")
                        .attr("transform", "rotate(-90)")
                        .attr("y", 0 - margin.left)
                        .attr("x",0 - (height/2))
                        .attr("dy", "1em")
                        .style("text-anchor", "middle")
                        .text("Number of Participants");

                    svg.append("g")
                        .attr("class","legend")
                        .call(legend);


                  // Remove old ones
                  svg.exit().remove();
                  // set the dimensions and margins of the graph

                  // End of race chart
                }

                // Handler for dropdown value change
                 var dropdownChange = function() {
                    var newYear = d3.select(this).property('value');
                    plotStackedAreaChartByYear(newYear);
                  };

                  var yearDropDown = d3.select("#selectSport")
                                        .selectAll("myoptions")
                                        .data(xSportAxis)
                                        .enter()
                                        .append('option')
                                        .attr("pointer-events", "none")
                                        .text(function (d) { return d; }) // text showed in the menu
                                        .attr("value", function (d) { return d; }) // corresponding value returned by the button

                  var yearValue = d3.select("#selectSport")
                                    .on("change",dropdownChange );


            plotStackedAreaChartByYear("Athletics");

  }

  async function init() {

    //Display Summer and Winter Event Olympic participants from the top 15 Countries identified in the first page
    var executeChartone = EventOlympicParticipation ();
    //Display the first chart - Total partitipation for all event types in Olympics from 1900 - 2016
    var executeCharttwo = SportOlympicParticipationHeatMap();

    var executeChartThree = genderBasedSportParticipationStackedArea();

  }


  </script>
  </body>
  </html>
